{% extends "users/base.html" %}

{% block content %}
  <h1>Candidates</h1>

  <!-- Filtros -->
  <form method="get">
      <div>
          <label for="location">Ubicación:</label>
          <input type="text" name="location" id="location" value="{{ request.GET.location }}">
      </div>
      <div>
          <label for="open_to_work">Disponibilidad para trabajar:</label>
          <select name="open_to_work" id="open_to_work">
              <option value="" {% if request.GET.open_to_work == "" %}selected{% endif %}>Todos</option>
              <option value="true" {% if request.GET.open_to_work == "true" %}selected{% endif %}>Sí</option>
              <option value="false" {% if request.GET.open_to_work == "false" %}selected{% endif %}>No</option>
          </select>
      </div>
      <div>
          <label for="vehicle">Vehículo disponible:</label>
          <select name="vehicle" id="vehicle">
              <option value="" {% if request.GET.vehicle == "" %}selected{% endif %}>Todos</option>
              <option value="true" {% if request.GET.vehicle == "true" %}selected{% endif %}>Sí</option>
              <option value="false" {% if request.GET.vehicle == "false" %}selected{% endif %}>No</option>
          </select>
      </div>
      <div>
          <label for="disability">Discapacidad:</label>
          <select name="disability" id="disability">
              <option value="" {% if request.GET.disability == "" %}selected{% endif %}>Todos</option>
              <option value="true" {% if request.GET.disability == "true" %}selected{% endif %}>Sí</option>
              <option value="false" {% if request.GET.disability == "false" %}selected{% endif %}>No</option>
          </select>
      </div>
      <div>
          <label for="disability_percentage">Porcentaje de discapacidad (mínimo):</label>
          <input type="number" name="disability_percentage" id="disability_percentage" value="{{ request.GET.disability_percentage }}">
      </div>
      <button type="submit">Aplicar filtros</button>
  </form>

  <!-- Lista de candidatos con checkboxes -->
  <form method="post" action="{% url 'manage_candidates' %}">
      {% csrf_token %}
      <ul>
          {% for candidate in candidates %}
              <li>
                  <input type="checkbox" name="selected_candidates" value="{{ candidate.id }}">
                  {{ candidate.user.get_full_name }} - {{ candidate.address }}
              </li>
          {% empty %}
              <li>No hay candidatos que coincidan con los filtros.</li>
          {% endfor %}
      </ul>

      <!-- Botones de acción -->
      <button type="submit" name="action" value="create_offer">Crear oferta a partir de seleccionados</button>
      <button type="submit" name="action" value="add_to_offer">Agregar a oferta existente</button>
  </form>
{% endblock %}
